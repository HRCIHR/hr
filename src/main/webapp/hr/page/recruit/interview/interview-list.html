<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-trasitional.dtd">
<html>

	<head>
		<title>面试登记</title>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>My JSP 'position-release_details.jsp' starting page</title>

		<script type="application/javascript" src="../../../../easyui/jquery.min.js"></script>

		<script type="application/javascript" src="../../../../easyui/jquery.easyui.min.js"></script>
		<script type="application/javascript" src="../../../../easyui/easyui-lang-zh_CN.js"></script>
		<link rel="stylesheet" href="../../../../easyui/themes/icon.css" />
		<link rel="stylesheet" href="../../../../easyui/themes/default/easyui.css" />

	</head>
	<script>
		function fuhe(datas) {

			console.log(datas);

			//给下拉框赋值
			setTimeout(function() {
				$('#addzhiweiClass').combobox('select', datas.ConfigMajor.configMajorKind.majorKindId);
				$('#zhaopinType').combobox('select', datas.engage_Type);
				$('#addzhiweiName').combobox('select', datas.ConfigMajor.majorId);
				$("#sex").combobox('select', datas.human_Sex);
				$("#guoji").combobox('select', datas.human_Nationality);
				$("#mingzu").combobox('select', datas.human_Race);
				$("#zongjiao").combobox('select', datas.human_Religion);
				$("#zhengzhimianmao").combobox('select', datas.human_Party);
				$("#xueli").combobox('select', datas.human_Educated_Degree);
				$("#jiaoyunianxian").combobox('select', datas.human_Educated_Years);
				$("#zhuanye").combobox('select', datas.human_Educated_Major);
				$("#techang").combobox('select', datas.human_Specility);
				$("#aihao").combobox('select', datas.human_Hobby);

				$("#human_Name").textbox("setValue", datas.human_Name);

				$("#human_Homephone").textbox("setValue", datas.human_Homephone);

				$("#human_Mobilephone").textbox("setValue", datas.human_Mobilephone);
				$("#human_Telephone").textbox("setValue", datas.human_Telephone);

				$("#human_Address").textbox("setValue", datas.human_Address);
				$("#human_Postcode").textbox("setValue", datas.human_Postcode);
				$("#human_Birthplace").textbox("setValue", datas.human_Birthplace);
				$("#resid").val(datas.res_Id);
				$("#human_Idcard").textbox("setValue", datas.human_Idcard);
				//human_Age  human_College human_History_Records remark
				$("#human_Age").textbox("setValue", datas.human_Age);
				$("#human_College").textbox("setValue", datas.human_College);
				$("#human_History_Records").textbox("setValue", datas.human_History_Records);
				$("#remark").textbox("setValue", datas.remark);
				//registerTime  bri
				$('#bri').datetimebox('setValue', datas.human_Birthday);
				$('#regist_Time').datetimebox('setValue', datas.regist_Time);

				$('#check_Time').datetimebox('setValue', datas.check_Time);

				$("#checker").textbox("setValue", datas.checker);
				$("#recomandation").textbox("setValue", datas.recomandation);

				//check_Time  checker  recomandation
				$(".evaluate").combobox("select", "未评价");
			}, 100);

			$('#Resumedialog').dialog("open");
		}
		$(function() {

			$("#updatebut").on("click", function() {
				$("#updateform").form('submit', {
					url: "http://127.0.0.1:8080/HR/Interview/saveInterview",
					onSubmit: function(param) {

					},
					success: function(data) {
						if(data) {
							$.messager.alert('提示信息', '修改成功!', 'info', function() {

								location.reload();
							});
							//关闭模态框 清除模态框数据clear

						} else {
							$.messager.alert('提示信息', '修改失败 请检查输入是否有误!', 'error');
						}
					}
				});

			})

			//			$("#zhiweiClass").combobox({
			//				url: 'http://127.0.0.1:8080/HR/MajorKind/queryMajorKind',
			//				valueField: "majorKindId",
			//				method: "get",
			//				textField: "majorKindName",
			//				onSelect: function(record) {
			//					console.log(record);
			//					$("#zhiweiName").combobox({
			//						url: 'http://127.0.0.1:8080/HR/Major/QueryMajor?majorKindId=' + record.majorKindId,
			//						valueField: "majorId",
			//						method: "get",
			//						textField: "majorName"
			//					})
			//				}
			//			});			
			$(".evaluate").combobox({
				url: 'http://127.0.0.1:8080/HR/PublicChar/queryPublicChar?type=面试等级',
				valueField: "attributeName",
				method: "get",
				textField: "attributeName",
				loadFilter: function(data) {

					var s = new Object();
					s.attributeName = "未评价";
					data.push(s);
					console.log(data);
					return data;

				}
			});
			$("#zhaopinType").combobox({
				url: 'http://127.0.0.1:8080/HR/PublicChar/queryPublicChar?type=招聘类型',
				valueField: "attributeName",
				method: "get",
				textField: "attributeName"
			});
			$("#guoji").combobox({
				url: 'http://127.0.0.1:8080/HR/PublicChar/queryPublicChar?type=国籍',
				valueField: "attributeName",
				method: "get",
				textField: "attributeName"
			});
			$("#mingzu").combobox({
				url: 'http://127.0.0.1:8080/HR/PublicChar/queryPublicChar?type=民族',
				valueField: "attributeName",
				method: "get",
				textField: "attributeName"
			});
			$("#zhengzhimianmao").combobox({
				url: 'http://127.0.0.1:8080/HR/PublicChar/queryPublicChar?type=政治面貌',
				valueField: "attributeName",
				method: "get",
				textField: "attributeName"
			});
			$("#xueli").combobox({
				url: 'http://127.0.0.1:8080/HR/PublicChar/queryPublicChar?type=学历',
				valueField: "attributeName",
				method: "get",
				textField: "attributeName"
			});
			$("#jiaoyunianxian").combobox({
				url: 'http://127.0.0.1:8080/HR/PublicChar/queryPublicChar?type=教育年限',
				valueField: "attributeName",
				method: "get",
				textField: "attributeName"
			});
			$("#zhuanye").combobox({
				url: 'http://127.0.0.1:8080/HR/PublicChar/queryPublicChar?type=专业',
				valueField: "attributeName",
				method: "get",
				textField: "attributeName"
			});
			$("#techang").combobox({
				url: 'http://127.0.0.1:8080/HR/PublicChar/queryPublicChar?type=特长',
				valueField: "attributeName",
				method: "get",
				textField: "attributeName"
			});
			$("#aihao").combobox({
				url: 'http://127.0.0.1:8080/HR/PublicChar/queryPublicChar?type=爱好',
				valueField: "attributeName",
				method: "get",
				textField: "attributeName"
			});
			$("#zongjiao").combobox({
				url: 'http://127.0.0.1:8080/HR/PublicChar/queryPublicChar?type=宗教信仰',
				valueField: "attributeName",
				method: "get",
				textField: "attributeName"
			});

			//Resumedialog
			$('#Resumedialog').dialog({
				title: "简历复核",
				width: 800,
				height: 600,
				shadow: true,
				closed: true
			});

			$("#searchbut").on("click", function() {
				var MajorId = $('#searchzhiweiName').textbox("getValue");
				var keyword = $('#keyword').textbox("getValue");
				var status = $('#status').val();
				var begin = $('#begin').datetimebox('getValue');
				var finish = $('#finish').datetimebox('getValue');
				var interview_Status = $("#interviewStatus").val();
				if(begin == "") {
					begin = "1899-11-30 00:00";
				}
				if(finish == "") {
					finish = "2300-11-30 00:00";
				}
				//				alert(MajorId + keyword + status + begin + finish);
				var newurl = "http://127.0.0.1:8080/HR/Resume/queryResumeByCase";
				$('#resumetable').datagrid({
					url: newurl,
					method: "post",
					queryParams: {
						MajorId: MajorId,
						keyword: keyword,
						status: status,
						begin: begin,
						finish: finish,
						interview_Status: interview_Status
					}
				});

			})
			//			$("#searchbut").on("click", function() {
			//				url: "xxx",
			//				$('#searchfrom').form('submit', {
			//					onSubmit: function(param) {
			//						console.log(param);
			//						return false;
			//					}
			//				});
			//			})

			//MajorKind/queryMajorKind 职位分类 zhiweiClass ===>zhiweiName
			$(".zhiweiClass").combobox({
				url: 'http://127.0.0.1:8080/HR/MajorKind/queryMajorKind',
				valueField: "majorKindId",
				method: "get",
				textField: "majorKindName",
				onSelect: function(record) {
					console.log(record);
					$(".zhiweiName").combobox({
						url: 'http://127.0.0.1:8080/HR/Major/QueryMajor?majorKindId=' + record.majorKindId,
						valueField: "majorId",
						method: "get",
						textField: "majorName"
					})
				}
			});
			$(".zhiweiName").combobox({})
			$('#resumetable').datagrid({
				url: 'http://127.0.0.1:8080/HR/Resume/queryResumeByCase',
				fitColumns: true,
				pagination: true,
				pageList: [5, 10],
				pageSize: 5,
				pageNumber: 1,
				method: "get",
				toolbar: '#tb',
				queryParams: {

					status: 1,
					interview_Status: 0

				},
				loadFilter: function(data) {
					var newarray = new Array();

					for(a = 0; a < data.rows.length; a++) {

						var obj = new Object();

						obj.res_Id = data.rows[a].res_Id;
						obj.human_Name = data.rows[a].human_Name;
						obj.human_Sex = data.rows[a].human_Sex;
						obj.majorKindName = data.rows[a].ConfigMajor.configMajorKind.majorKindName;
						obj.majorName = data.rows[a].ConfigMajor.majorName;

						var interviewstatus = data.rows[a].ConfigMajor.interview_Status;
						if(interviewstatus * 1 > 0) {
							obj.interview_Status = "已面试";
						} else {
							obj.interview_Status = "待面试";
						}

						obj.human_Telephone = data.rows[a].human_Telephone;
						var status = data.rows[a].check_Status;
						if(status * 1 > 0) {
							obj.check_Status = "已复核";
						} else {
							obj.check_Status = "待复核";
						}

						obj.datas = data.rows[a];
						newarray.push(obj);
					}

					var rs = new Object();
					rs.total = data.total;
					rs.rows = newarray;

					console.log(rs);
					return rs;
				},

				columns: [
					[{
							field: 'res_Id',
							title: '档案编号',
							width: 187,
							align: 'right'
						}, {
							field: 'human_Name',
							title: '姓名',
							width: 187,
							align: 'right'
						}, {
							field: 'human_Sex',
							title: '性别',
							width: 187,
							align: 'right'
						},
						{
							field: 'majorKindName',
							title: '职位分类',
							width: 187,
							align: 'right'
						},
						{
							field: 'majorName',
							title: '职位名称',
							width: 187,
							align: 'right'
						},
						{
							field: 'human_Telephone',
							title: '电话号码',
							width: 187,
							align: 'right'
						},

						{
							field: 'check_Status',
							title: '复核状态',
							width: 187,
							align: 'right'
						},
						{
							field: 'interview_Status',
							title: '面试状态',
							width: 187,
							align: 'right'
						},
						{
							field: 'datas',
							title: '操作',
							width: 187,
							align: 'right',
							formatter: function(value, row, index) {
								var datas = JSON.stringify(row.datas);
								//								console.log(datas);
								return "<button onClick='fuhe(" + datas + ")'>登记</button>"
							}
						}
					]
				]
			});
		})
	</script>

	<body>

		<table id="resumetable">
			<div id="tb" style="padding:2px 5px;">
				<form id="searchfrom" method="post">
					<input id="a" class="zhiweiClass" data-options="label:'职位分类'" class="easyui-combobox" style="width:300px">

					<input id="searchzhiweiName" class="zhiweiName" name="majorId" data-options="label:'职位名称'" class="easyui-combobox" style="width:300px">
					<input id="keyword" name="keyword" class="easyui-textbox" data-options="label:'关键字'" style="width:300px">

					<input id="begin" class="easyui-datetimebox" name="begin" data-options="required:true,showSeconds:false,label:'登记时间'" style="width:250px">至
					<input id="finish" class="easyui-datetimebox" name="finish" data-options="required:true,showSeconds:false" style="width:150px">
					<input id="status" type="hidden" value="1" name="status" />
					<input id="interviewStatus" type="hidden" value="0" name="interview_Status" />

					<a href="#" id="searchbut" class="easyui-linkbutton" iconCls="icon-search">Search</a>
				</form>
			</div>
		</table>
		<div id="Resumedialog">
			<!--<div data-options="region:'center',title:'简历复核'" style="background:#eee;">-->
			<form id="updateform" method="post">
				<input type="hidden" name="resumeId" id="resid" />
				<table>
					<tr>
						<td>
							<!--<input class="easyui-textbox" data-options="label:'职位分类'" style="width:300px" />
-->
							<input id="addzhiweiClass" class="zhiweiClass" name="" data-options="label:'职位分类',labelWidth:150,readonly: true" class="easyui-combobox" style="width:300px">
						</td>
						<td>
							<!--<input class="easyui-textbox" data-options="label:'职位名称'" style="width:300px" />-->
							<input id="addzhiweiName" class="zhiweiName" name="humanMajorId" data-options="label:'职位名称',labelWidth:150,readonly: true" class="easyui-combobox" style="width:300px">

						</td>
						<td>
							<!--<input class="easyui-textbox" data-options="label:'招聘类型'" style="width:300px" />-->
							<input id="zhaopinType" id="zptype" name="" data-options="label:'招聘类型',labelWidth:150,readonly: true" class="easyui-combobox" style="width:300px">
						</td>
					</tr>
					<tr>
						<td><input id="human_Name" name="humanName" class="easyui-textbox" data-options="label:'姓名',readonly: true" style="width:300px" />
						</td>
						<td>
							<!--<input class="easyui-textbox" data-options="label:'性别'" style="width:300px" />-->
							<select id="sex" name="" class="easyui-combobox" data-options="label:'性别',readonly: true" style="width:300px;">
								<option>男</option>
								<option>女</option>
							</select>
						</td>
						<td><input id="human_Email" name="" class="easyui-textbox" data-options="label:'Email@',readonly: true" style="width:300px" />
						</td>
					</tr>
					<tr>
						<td><input id="human_Mobilephone" name="" class="easyui-textbox" data-options="label:'电话',readonly: true" style="width:300px" />
						</td>
						<td><input id="human_Homephone" name="" class="easyui-textbox" data-options="label:'家庭电话',readonly: true" style="width:300px" />
						</td>
						<td><input id="human_Telephone" name="" class="easyui-textbox" data-options="label:'手机',readonly: true" style="width:300px" />
						</td>
					</tr>
					<tr>
						<td><input id="human_Address" name="" class="easyui-textbox" data-options="label:'住址',readonly: true" style="width:300px" />
						</td>
						<td>
							<!--<input name="humanBirthday" class="easyui-textbox" data-options="label:'生日'" style="width:300px" />-->
							<input id="bri" class="easyui-datetimebox" name="" data-options="required:true,showSeconds:false,label:'生日',readonly: true" style="width:300px">

							<td><input id="human_Postcode" name="" class="easyui-textbox" data-options="label:'邮编',readonly: true" style="width:300px" />
							</td>
					</tr>
					<tr>
						<td>
							<!--<input class="easyui-textbox" data-options="label:'国籍'" style="width:300px" />-->
							<input id="guoji" name="" data-options="label:'国籍',labelWidth:150,readonly: true" class="easyui-combobox" style="width:300px">

						</td>
						<td><input id="human_Birthplace" name="" class="easyui-textbox" data-options="label:'出生地',readonly: true" style="width:300px" />
						</td>
						<td>
							<!--<input class="easyui-textbox" data-options="label:'民族'" style="width:300px" />-->
							<input id="mingzu" name="" data-options="label:'民族',labelWidth:150,readonly: true" class="easyui-combobox" style="width:300px">

						</td>
					</tr>
					<tr>
						<td>
							<!--<input class="easyui-textbox" data-options="label:'宗教信仰'" style="width:300px" />-->
							<input id="zongjiao" name="" data-options="label:'宗教信仰',labelWidth:150,readonly: true" class="easyui-combobox" style="width:300px">

						</td>
						<td>
							<!--<input class="easyui-textbox" data-options="label:'政治面貌'" style="width:300px" />-->
							<input id="zhengzhimianmao" name="" data-options="label:'政治面貌',labelWidth:150,readonly: true" class="easyui-combobox" style="width:300px">

						</td>
						<td><input id="" name="" class="easyui-textbox" data-options="label:'身份证号码',readonly: true" style="width:300px" />
						</td>
					</tr>
					<tr>
						<td><input id="human_Age" name="" class="easyui-textbox" data-options="label:'年龄',readonly: true" style="width:300px" />
						</td>
						<td><input id="human_College" name="" class="easyui-textbox" data-options="label:'毕业院校',readonly: true" style="width:300px" />
						</td>
						<td>
							<!--<input class="easyui-textbox" data-options="label:'学历'" style="width:300px" />-->
							<input id="xueli" name="" data-options="label:'学历',labelWidth:150,readonly: true" class="easyui-combobox" style="width:300px">

						</td>
					</tr>
					<tr>
						<td>
							<!--<input class="easyui-textbox" data-options="label:'教育年限'" style="width:300px" />-->
							<input id="jiaoyunianxian" name="" data-options="label:'教育年限',labelWidth:150,readonly: true" class="easyui-combobox" style="width:300px">

						</td>
						<td>
							<!--<input class="easyui-textbox" data-options="label:'学历专业'" style="width:300px" />-->
							<input id="zhuanye" name="" data-options="label:'学历专业',labelWidth:150" class="easyui-combobox" style="width:300px">

						</td>
						<td>
							<input class="easyui-textbox" data-options="label:'薪酬要求',readonly: true" style="width:300px" />
						</td>
					</tr>
					<tr>
						<td>
							<!--<input class="easyui-textbox" data-options="label:'特长	'" style="width:300px" />-->
							<input id="techang" name="" data-options="label:'特长',labelWidth:150,readonly: true" class="easyui-combobox" style="width:300px">

						</td>
						<td>
							<!--<input class="easyui-textbox" data-options="label:'爱好'" style="width:300px" />-->
							<input id="aihao" name="" data-options="label:'爱好',labelWidth:150,readonly: true" class="easyui-combobox" style="width:300px">

						</td>
						<td>
							<!--<input id="registerTime" class="easyui-textbox" data-options="label:'注册时间'" style="width:300px" />-->
							<!--regist_Time-->
							<input id="regist_Time" class="easyui-datetimebox" name="" data-options="required:true,showSeconds:false,label:'注册时间',readonly:true" style="width:300px">

						</td>
					</tr>
					<tr>
						<td>
							<input id="checker" name="checker" class="easyui-textbox" data-options="label:'推荐人',readonly: true" style="width:300px" />

						</td>
						<td>
							<input id="check_Time" class="easyui-datetimebox" name="checkTime" data-options="required:true,showSeconds:false,label:'推荐时间',readonly: true" style="width:300px">

						</td>

					</tr>
					<tr>
						<td><input id="human_History_Records" name="" class="easyui-textbox" data-options="label:'个人履历',multiline:true,readonly: true" style="width:250px;height: 130px;">
						</td>
						<td>
							<input id="remark" name="" class="easyui-textbox" data-options="label:'备注',multiline:true,readonly: true" style="width:250px;height: 130px;">
						</td>
						<td><input id="recomandation" name="checkComment" class="easyui-textbox" data-options="label:'推荐意见',multiline:true,readonly: true" style="width:250px;height: 130px;">
						</td>
						<!--<td>

							<button type="button" id="updatetijiao">提交</button>
						</td>-->
					</tr>
					<tr>
						<td colspan="3">
							<hr />
						</td>
					</tr>
					<tr>
						<!--<td>
							<input id="interview_Amount" name="interview_Amount" class="easyui-textbox" data-options="label:'面试次数'" style="width:300px" />
					
						</td>-->
						<td>
							<input id="" class="evaluate" name="imageDegree" data-options="label:'形象评价',labelWidth:150" class="easyui-combobox" style="width:300px">

						</td>
						<td>
							<input id="" class="evaluate" name="nativeLanguageDegree" data-options="label:'口才评价',labelWidth:150" class="easyui-combobox" style="width:300px">

						</td>

					</tr>
					<tr>
						<td>
							<input id="" class="evaluate" name="responseSpeedDegree" data-options="label:'应变能力',labelWidth:150" class="easyui-combobox" style="width:300px">
						</td>
						<td>
							<input id="" class="evaluate" name="eqDegree" data-options="label:'EQ',labelWidth:150" class="easyui-combobox" style="width:300px">

						</td>
						<td>
							<input id="" class="evaluate" name="iqDegree" data-options="label:'IQ',labelWidth:150" class="easyui-combobox" style="width:300px">

						</td>

					</tr>

					<tr>
						<td>
							<input id="" class="evaluate" name="foreignLanguageDegree" data-options="label:'外语口语能力',labelWidth:150" class="easyui-combobox" style="width:300px">

						</td>
						<td>
							<input id="zonghe" class="evaluate" name="multiQualityDegree" data-options="label:'综合评价',labelWidth:150" class="easyui-combobox" style="width:300px">

						</td>
					</tr>
					<tr>
						<td>
							<input id="" name="register" class="easyui-textbox" data-options="label:'面试人'" style="width:300px" />

						</td>
						<td>
							<!--<input id="" name="" class="easyui-textbox" data-options="label:'面试时间'" style="width:300px" />-->
							<input id="" name="registeTime" class="easyui-datetimebox" data-options="required:true,showSeconds:false,label:'面试时间'" value="33" style="width:300px">
						</td>
						<td>
							<input id="" name="interviewComment" class="easyui-textbox" data-options="label:'面试评价',multiline:true" style="width:250px;height: 130px;">

						</td>
						<input type="hidden" value="1" name="checkStatus" />
					</tr>
					<tr>

						<td><button id="updatebut" type="button">提交</button></td>
					</tr>
				</table>
			</form>
			<!--</div>-->
		</div>

	</body>
	<script>
	</script>

</html>